apiVersion: '2018-10-01'
identity: null
location: brazilsouth
name: chatops
properties:
  containers:
  - name: app
    properties:
      environmentVariables:
      - name: 'MM_SQLSETTINGS_DATASOURCE'
        value: 'postgresql://db-lab033.postgres.database.azure.com:5432/mattermost?user=dblab033@db-lab033&password=Masterl@b033&sslmode=require&connect_timeout=10'
      image: mattermost/mattermost-prod-app:latest
      ports:
      - port: 8000
      - port: 22
      resources:
        requests:
          cpu: 2.0
          memory: 8.0
      volumeMounts:
      - mountPath: /mattermost/config
        name: app-config
      - mountPath: /mattermost/data
        name: app-data
      - mountPath: /mattermost/logs
        name: app-logs
      - mountPath: /mattermost/plugins
        name: app-plugins
  - name: web
    properties:
      environmentVariables: []
      image: mattermost/mattermost-prod-web:5.9.0
      ports:
      - port: 80
      - port: 443
      resources:
        requests:
          cpu: 2.0
          memory: 4.0
      volumeMounts:
      - mountPath: /cert
        name: web-cert
  ipAddress:
    type: Public
    ports:
    - port: 80
      protocol: TCP
    - port: 22
      protocol: TCP
    - port: 443
      protocol: TCP
  osType: Linux
  restartPolicy: OnFailure
  volumes:
  - name: app-config
    azureFile:
      sharename: /var/app/current/app/mattermost/config
      storageAccountName: 
      storageAccountKey:
  - name: app-logs
    azureFile:
      sharename: /var/app/current/app/mattermost/logs
      storageAccountName: 
      storageAccountKey:
  - name: app-plugins
    azureFile:
      sharename: /var/app/current/app/mattermost/plugins
      storageAccountName: 
      storageAccountKey:
  - name: app-data
    azureFile:
      sharename: /var/app/current/app/mattermost/data
      storageAccountName: 
      storageAccountKey:
  - name: web-cert
    azureFile:
      sharename: /var/app/current/web/cert
      storageAccountName: 
      storageAccountKey:
tags: {}
type: Microsoft.CantainerInstance/containerGroups
